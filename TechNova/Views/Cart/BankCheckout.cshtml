@model TechNova.Models.CheckoutViewModel
@{
    ViewData["Title"] = "Bank Transfer";
    var items = ViewBag.CartItems as List<TechNova.Models.CartItem> ?? new();
}
<div class="checkout-page">
    <div class="container my-4">
        <nav class="small text-muted mb-4">
            <a class="text-muted text-decoration-none" href="@Url.Action("Index","Home")">Home</a>
            <span class="mx-2">/</span><span>Bank Transfer</span>
        </nav>

        <h3 class="fw-bold mb-4">Billing & Delivery Details (Bank)</h3>
        <div class="row g-4">
            <div class="col-lg-7">
                <form asp-action="BankCheckout" method="post" novalidate>
                    @Html.AntiForgeryToken()
                    <input type="hidden" asp-for="SelectedPaymentID" value="1" />

                    <div asp-validation-summary="ModelOnly" class="text-danger small mb-3"></div>

                    <div class="mb-3"><label class="form-label">Full Name*</label><input asp-for="FullName" class="form-control" /><span asp-validation-for="FullName" class="text-danger small"></span></div>
                    <div class="mb-3"><label class="form-label">Street Address*</label><input asp-for="StreetAddress" class="form-control" /><span asp-validation-for="StreetAddress" class="text-danger small"></span></div>
                    <div class="mb-3"><label class="form-label">Apartment (optional)</label><input asp-for="Apartment" class="form-control" /></div>
                    <div class="mb-3"><label class="form-label">Town/City*</label><input asp-for="City" class="form-control" /><span asp-validation-for="City" class="text-danger small"></span></div>
                    <div class="mb-3"><label class="form-label">Country*</label><select asp-for="Country" class="form-select"><option value="Canada">Canada</option></select><span asp-validation-for="Country" class="text-danger small"></span></div>
                    <div class="mb-3"><label class="form-label">Province/Territory*</label><select asp-for="State" class="form-select"><option value="Ontario">Ontario</option></select><span asp-validation-for="State" class="text-danger small"></span></div>
                    <div class="mb-3"><label class="form-label">Postal Code*</label><input asp-for="PostalCode" class="form-control" /><span asp-validation-for="PostalCode" class="text-danger small"></span></div>
                    <div class="mb-3"><label class="form-label">Phone Number*</label><input asp-for="PhoneNumber" class="form-control" /><span asp-validation-for="PhoneNumber" class="text-danger small"></span></div>
                    <div class="mb-3"><label class="form-label">Email Address*</label><input asp-for="EmailAddress" class="form-control" /><span asp-validation-for="EmailAddress" class="text-danger small"></span></div>

                    <div class="form-check mb-4">
                        <input asp-for="SaveForNextTime" class="form-check-input" />
                        <label class="form-check-label">Save this information for next time</label>
                    </div>

                    <button class="btn button-style px-4" type="submit">Continue to Bank Details</button>
                </form>
            </div>

            <div class="col-lg-5">
                <div class="summary-card p-3">
                    <div class="mb-2 fw-bold text-danger">Order Summary</div>

                    @foreach (var it in items)
                    {
                        <div class="d-flex justify-content-between small py-1 border-bottom">
                            <span>@it.Name <span class="text-muted">x @it.Qty</span></span>
                            <span>@it.LineTotal.ToString("C")</span>
                        </div>
                    }

                    <hr />
                    <div class="d-flex justify-content-between small mb-2">
                        <span>Subtotal:</span><span>@Model.Subtotal.ToString("C")</span>
                    </div>
                    <div class="d-flex justify-content-between small mb-2">
                        <span>Tax (@((Model.TaxRate * 100).ToString("0"))%)</span><span>@Model.Tax.ToString("C")</span>
                    </div>
                    <div class="d-flex justify-content-between small mb-2">
                        <span>Shipping:</span><span>@(Model.Shipping <= 0 ? "Free" : Model.Shipping.ToString("C"))</span>
                    </div>
                    <div class="d-flex justify-content-between fw-bold text-danger mb-1">
                        <span>Total:</span><span>@Model.Total.ToString("C")</span>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
@section Scripts {
    <partial name="_ValidationScriptsPartial" />
}
